<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@600&display=swap" rel="stylesheet">
    <title>ì•„í‹°ìŠ¤íŠ¸ ì±„íŒ…</title>

<style>
  body {
    font-family: "Roboto";
    font-size: 13.7px;
    line-height: 1.5;
    margin: 0;
    background: #EEEEEE;
    padding-bottom: 70px; /* input bar ë†’ì´ì— ë§ì¶° ì—¬ë°± ì£¼ê¸° */
  }
  .message-content {
    display: flex;
    flex-direction: column;
    max-width: 95%;
    align-items: flex-start; /* ë§í’ì„ ì´ ë‹¤ë¥¸ ë§í’ì„  ë¹„ìœ¨ì— ë”°ë¼ê°€ì§€ ì•Šë„ë¡ */
  }
  .header {
    display: flex;
    align-items: center;
    margin-bottom: 3.9px; /* ì´ë¦„-ë©”ì‹œì§€ ê°„ê²© */
  }
  .chat-container {
    max-width: 500px;
    margin: 0;
    padding: 8px;
    }
  .chat-message {
    display: flex;
    align-items: flex-start;
    margin-bottom: 16.9px; /* ë©”ì‹œì§€ ê°„ ê°„ê²© */
    gap: 6px /* ë©”ì‹œì§€-í”„ë¡œí•„ ê°„ê²© */
    }
  .profile {
    width: 39.5px;
    height: 39.6px;
    border-radius: 50%;
    background-size: cover;
    background-position: center;
    margin-top: 2px; /* ìˆ«ìâ†“ ìœ„ì¹˜â†‘ */
    border: 0.2px solid #E8E8E8; /* í…Œë‘ë¦¬, ê¸°ì¡´ ìƒ‰ : cdcdcd;  */
  }
  .name {
    font-size: 11px;
    font-weight: 400;
    color: #171718;
  }
/* ë§í’ì„  */
  .bubble {
    background: #FFFFFF;
    border-radius: 4px 14.5px 14.5px 14.5px;
    padding: 12px 12px 11px 12px;  /* ìœ„ ì˜¤ë¥¸ ì•„ë˜ ì™¼ìª½ ì—¬ë°± */
    font-weight: 400;
    line-height: 1.2;
  }
  .time {
    font-size: 9px;
    font-weight: 350;
    color: #AAAAAA;
    margin-left: 6px;
    white-space: nowrap;
    position: relative;
    top: 2px;
  }
  .time .colon {
    position: relative;
    top: -2px; /* ìˆ«ìâ†“ ì½œë¡  ìœ„ì¹˜â†‘ */
  }
/* â–¼â–¼â–¼ [ë‚ ì§œ] â–¼â–¼â–¼ */
   /* 1. ë‚ ì§œ êµ¬ë¶„ì„  ìŠ¤íƒ€ì¼ */
  .date-divider {
    text-align: center;
    font-size: 10px; color: #777777; /* ê¸°ì¡´ ìƒ‰: 8A8A8A; ë‚ ì§œ */
    font-weight: 400;
    margin: 21.5px 0 21.5px; /* ìœ— ë©”ì‹œì§€-ë‚ ì§œ(ì¢Œìš°ì—¬ë°±ì¡°ì ˆ)-ì•„ë˜ë©”ì‹œì§€ */
    position: relative;
  }
   /* ë‚ ì§œ ìœ„ì— ì„ ì„ ê·¸ë¦¬ê¸° ìœ„í•œ ê°€ìƒ ìš”ì†Œ ì¶”ê°€ */
  .date-divider::before {
    content: '';
    position: absolute;
    top: -6.5px; /* ë‚ ì§œì™€ ì„  ê°„ê²©, ìˆ«ìâ†“ ê°„ê²©â†‘ */
    left: 50%; /* ì„  ì‹œì‘ì ì´ í™”ë©´ ì¤‘ì•™ */
    width: 100vw;
    height: 0.7px; /* ì„  ë‘ê»˜ */
    background: #D6D6D6; /* ê¸°ì¡´ ìƒ‰: E0E0E0; ë‚ ì§œ ì„  */
    transform: translateX(-50%);
  }
/* â–¼â–¼â–¼ [ë‚´ê°€ ë³´ë‚´ëŠ” ë²„ë¸”] â–¼â–¼â–¼ */
   /* ì˜¤ë¥¸ìª½ë°°ì¹˜ - ë©”ì‹œì§€ ìƒ‰ - ì‹œê°„ */
  .my-chat-message { display: flex; justify-content: flex-end; margin-bottom: 18px; margin-top: 19px; }
  .my-bubble { background: #A584F9; color: #FFFFFF; border-radius: 14.5px 14.5px 4px 14.5px; }
  .my-chat-message .time { margin-left: 0; margin-right: 6px; }

/* â–¼â–¼â–¼ [ì‚¬ì§„] â–¼â–¼â–¼ */
  .image-bubble {
    padding: 0;
    background: none;
    margin-left: 1px;
    margin-top: 2px;
  }
  .image-bubble img {
    max-width: 244px;
    border-radius: 4px 13px 13px 13px;
    display: block;
  }

/* â–¼â–¼â–¼ [ìŒì„± ë©”ì‹œì§€] ì¶”ê°€ â–¼â–¼â–¼ */
  .voice-bubble {
    display: flex;
    align-items: center; /* ì•„ì´ì½˜ - í…ìŠ¤íŠ¸ ì˜†ìœ¼ë¡œ ì •ë ¬*/
    gap: 8px; /* ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ ì‚¬ì´ ê°„ê²© */
    font-family: "Roboto";
    font-size: 13px;
    font-weight: 600;
    padding: 8px 10px 9px 10px; !important; /* ìœ„, ì˜¤ë¥¸ìª½, ì•„ë˜, ì™¼ìª½ */
  }
  .voice-bubble img {
    width: 22.5px;
    height: 22.5px;
  }

/* â–¼â–¼â–¼ [ì´ëª¨ì§€] â–¼â–¼â–¼ */
   /* ì§„ì§œ ì´ëª¨ì§€ */
  .standalone-emoji {
    font-size: 66px;
    line-height: 1.5;
    background: none;
  }
   /* ë²„ë¸” ì´ëª¨í‹°ì½˜ */
  .sticker-image {
    width: 110px;
    height: auto;
  }

/* â–¼â–¼â–¼ [ë²ˆì—­] â–¼â–¼â–¼ */
   /* ì ì„  ìŠ¤íƒ€ì¼ */
  .dotted-divider {
    border: none;
    background-image: linear-gradient(to right, #F4F4F4 4.5px, transparent 5px);
    background-size: 6.5px 100%; /* ì ì„  ë¹ˆ ë¶€ë¶„ ê¸¸ì´ */
    background-repeat: repeat-x;
    background-position: left;
    height: 1px; /* ì„ ì˜ ë†’ì´(ë‘ê»˜) ì§€ì • */
    margin: 8.5px -13px; /* ì ì„  ìƒí•˜ ê°„ê²© , ì ì„ ì„ ë§í’ì„ ê¹Œì§€ ì—°ê²° */
  }
   /* ë§í’ì„  ë‚´ë¶€ ë²ˆì—­ í…ìŠ¤íŠ¸ */
  .translation-inner {
    font-size: 13.5px;
    color: #9050F3;
    line-height: 1.2;
  }
  .bubble.has-translation {
    padding-bottom: 9px; /* ë²ˆì—­ ìˆëŠ” ë§í’ì„ ì˜ ì•„ë˜ ì—¬ë°±ë§Œ ì¤„ì´ê¸° */
  }

/* â–¼â–¼â–¼ [ARTIST ë‹µì¥] â–¼â–¼â–¼ */
  .reply-bubble {
    background-color: #FCFCFC; /* ë°°ê²½ ìƒ‰ */
    padding: 13.7px 12px 19px 12px; /* ìœ„ ì˜¤ë¥¸ ì•„ë˜ ì™¼ìª½ ê°„ê²© */
    margin-bottom: 6px; /* ë‘ ë§í’ì„  ê°„ê²© */
    border-radius: 14px;
  }
  .reply-title {
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 9.5px;
    color: #020202; /* ARTISTì˜ ë‹µì¥ */
    margin-bottom: 5px; /* ARTISTì˜ ë‹µì¥-íŒ¬ë²„ë¸” ê°„ê²© */
  }
  .reply-content {
    font-size: 11.9px;
    color: #00000080; /* íŒ¬ ë²„ë¸” 7E7E7E */
  }
  .bubble-after-reply {
    border-top-left-radius: 4px;}
/* â–¼â–¼â–¼ [input bar] â–¼â–¼â–¼ */
  .fixed-bottom-image { position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; }
  .fixed-bottom-image img { max-width: 500px; width: 100%; display: block; margin: 0 auto; }
</style>

</head>
  <body>
    <div class="chat-container" id="chat"></div>
    <div class="fixed-bottom-image">
      <img src="../pic/input_bar.jpg" alt="ì±„íŒ… ì…ë ¥ì°½ ì´ë¯¸ì§€">
    </div>

<script>
  // ë²ˆì—­ì„ ë³´ë ¤ë©´ true, ìˆ¨ê¸°ë ¤ë©´ falseë¡œ ë³€ê²½
  const showTranslations = true;
  // ì•„í‹°ìŠ¤íŠ¸ ì •ë³´
  const artistProfile = [
    {img: "../riku_profile_color.jpg", name: "ã…‡ã……ã…‡"},
    {img: "../profile/riku_baby.jpg", name:"YUSHI"},
    {img: "../profile/profile_riku_color.jpg", name:"é™¸"}
  ];
  // ë©”ì‹œì§€ ë°°ì—´
  const messages = [
    { type: 'date', content: '2024ë…„ 8ì›” 10ì¼ í† ìš”ì¼' },
    { sender: 'artist', type: 'text', content: "ç¬‘ç¬‘", translation: "ì›ƒë‹¤", time: "ì˜¤í›„ 10:25", profileIndex: 2 },
    { sender: 'artist', type: 'reply', replyContent: "'ë¦¬ì¿ ì•¼<br>ë³´ê³ ì‹¶ì–´'", mainContent: "ë‚˜ë‘", time: "ì˜¤í›„ 11:05", profileIndex: 0 },
    { sender: 'artist', type: 'emote', content: "ğŸ˜™", time: "ì˜¤í›„ 10:06", profileIndex: 1 },
    { sender: 'artist', type: 'emote', content: '../emoji/tamagotchi_mametchi_hello.png', isImage: true, time: "ì˜¤í›„ 10:13", profileIndex: 1 },
    { sender: 'artist', type: 'image', content: '../pic/riku_250909.jpg', time: 'ì˜¤í›„ 10:22', profileIndex: 2 },
// â–²â–²â–² [ìœ í˜• 8ê°œ ì •ë¦¬] â–²â–²â–²
    { sender: 'me', type: 'text', content: 'ì•„ë‹ˆ ì´ëŸ°ê±° ì½ê³  ê°€ë©´ ì–´ëœ©í•˜ëŠ”ë°', time: 'ì˜¤í›„ 8:19' },
    { sender: 'artist', type: 'voice', content: "0:03", time: "ì˜¤í›„ 8:20", profileIndex: 0 },
    { sender: 'artist', type: 'text', content: "Skrrrrrrr", time: "ì˜¤í›„ 8:20", profileIndex: 0 },
    { sender: 'artist', type: 'voice', content: "voice", time: "00:55", profileIndex: 0 },
    { sender: 'artist', type: 'text', content: "ì‘ í•œì†Œì ˆë§Œ", time: "00:55", profileIndex: 0 },
    { sender: 'artist', type: 'text', content: "ì˜ìğŸ’š", time: "00:55", profileIndex: 0 },
    { sender: 'artist', type: 'voice', content: "voice", time: "08:51 PM", profileIndex: 0 },
  ];
  let currentProfileIndex = 0;
  const chatContainer = document.getElementById("chat");

  messages.forEach(msg => {
// 1. ë‚ ì§œ
    if (msg.type === 'date') {
      const dateEl = document.createElement('div');
      dateEl.className = 'date-divider';
      dateEl.textContent = msg.content;
      chatContainer.appendChild(dateEl);
      return;
    }
// 2. ë‚´ê°€ ë³´ë‚´ëŠ” ë²„ë¸”
    if (msg.sender === 'me') {
      const myMsg = document.createElement("div");
      myMsg.className = "my-chat-message";
      myMsg.innerHTML = `
      <div style="display:flex; align-items:flex-end;">
      <div class="time">${msg.time.replace(':', '<span class="colon">:</span>')}</div>
      <div class="bubble my-bubble">${msg.content}</div>
      </div>
      `;
      chatContainer.appendChild(myMsg);
      return;
    }

    if (msg.profileIndex !== undefined) {
      currentProfileIndex = msg.profileIndex;
    }

    const chatMsg = document.createElement("div");
    chatMsg.className = "chat-message";
// â–¼ ì•„í‹°ìŠ¤íŠ¸ íƒœê·¸ ì½”ë“œ <span class="artist-tag">ARTIST</span>
    if (msg.type === 'reply') {
      chatMsg.innerHTML = `
      <div class="profile" style="background-image: url('${artistProfile[currentProfileIndex].img}')"></div>
      <div class="message-content">
      <div class="header">
      <span class="artist-tag">ARTIST</span>
      <div class="name">${artistProfile[currentProfileIndex].name}</div>
      </div>
      <div class="bubble reply-bubble">
      <div class="reply-title">ARTISTì˜ ë‹µì¥</div>
      <div class="reply-content">${msg.replyContent}</div>
      </div>
      <div style="display:flex; align-items:flex-end;">
      <div class="bubble bubble-after-reply">${msg.mainContent}</div>
      <div class="time">${msg.time.replace(':', '<span class="colon">:</span>')}</div>
      </div>
      </div>
      `;
    } else {
      let messageBodyHTML = '';

      if (msg.type === 'emote') {
        if (msg.isImage) {
          messageBodyHTML = `<img src="${msg.content}" class="sticker-image" alt="sticker">`;
        } else {
          messageBodyHTML = `<div class="standalone-emoji">${msg.content}</div>`;
        }
      } else if (msg.type === 'image') {
        messageBodyHTML = `<div class="bubble image-bubble"><img src="${msg.content}" alt="image message"></div>`;
      // â–¼â–¼â–¼ [ìŒì„± ë©”ì‹œì§€] ë Œë”ë§ ë¡œì§ ì¶”ê°€ â–¼â–¼â–¼
      } else if (msg.type === 'voice') {
        // ë„¤ê°€ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ íŒŒì¼ ì´ë¦„ì„ ì—¬ê¸°ì— ì •í™•íˆ ê¸°ì…í•´ì¤˜.
        messageBodyHTML = `<div class="bubble voice-bubble">
                            <img src="voice/voice_galaxy.jpg" alt="voice icon">
                            <span>${msg.content}</span>
                           </div>`;
      } else {
        let bubbleContent = msg.content;
        let bubbleClass = 'bubble';

        if (showTranslations && msg.translation) {
          bubbleContent += `
          <hr class="dotted-divider">
          <div class="translation-inner">${msg.translation}</div>
          `;
          bubbleClass += ' has-translation';
        }
        messageBodyHTML = `<div class="${bubbleClass}">${bubbleContent}</div>`;
      }
// â–¼ ì•„í‹°ìŠ¤íŠ¸ íƒœê·¸ ì½”ë“œ <span class="artist-tag">ARTIST</span>
      chatMsg.innerHTML = `
      <div class="profile" style="background-image: url('${artistProfile[currentProfileIndex].img}')"></div>
      <div class="message-content">
      <div class="header">

      <div class="name">${artistProfile[currentProfileIndex].name}</div>
      </div>
      <div style="display:flex; align-items:flex-end;">
      ${messageBodyHTML}
      <div class="time">${msg.time.replace(':', '<span class="colon">:</span>')}</div>
      </div>
      </div>
      `;
    }
    chatContainer.appendChild(chatMsg);
  });
</script>
  </body>
</html>
